{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ config.title }}{% endblock %}
{% block description %}{{ page.description | default(value=page.summary) | default(value=config.description) }}{% endblock %}

{% block og_title %}{{ page.title }}{% endblock %}
{% block og_description %}{{ page.description | default(value=page.summary) }}{% endblock %}
{% block og_type %}article{% endblock %}

{% block twitter_title %}{{ page.title }}{% endblock %}
{% block twitter_description %}{{ page.description | default(value=page.summary) }}{% endblock %}

{% block content %}
<article class="blog-post">
    <div class="container">
        <!-- Post Header -->
        <header class="post-header">
            <h1 class="post-title">{{ page.title }}</h1>
            {% if page.date %}
            <div class="post-meta">
                <time datetime="{{ page.date }}">{{ page.date | date(format="%B %d, %Y") }}</time>
                {% if page.reading_time %}
                <span class="reading-time">{{ page.reading_time }} min read</span>
                {% endif %}
            </div>
            {% endif %}
            {% if page.taxonomies.categories %}
            <div class="post-categories">
                {% for category in page.taxonomies.categories %}
                <a href="{{ get_taxonomy_url(kind='categories', name=category) }}" class="category">{{ category }}</a>
                {% endfor %}
            </div>
            {% endif %}
            {% if page.taxonomies.tags %}
            <div class="post-tags">
                {% for tag in page.taxonomies.tags %}
                <a href="{{ get_taxonomy_url(kind='tags', name=tag) }}" class="tag">{{ tag }}</a>
                {% endfor %}
            </div>
            {% endif %}
        </header>

        <!-- Table of Contents (for long posts) -->
        {% if page.toc %}
        <aside class="table-of-contents">
            <h2>Table of Contents</h2>
            <ul>
            {% for h1 in page.toc %}
                <li>
                    <a href="{{ h1.permalink | safe }}">{{ h1.title }}</a>
                    {% if h1.children %}
                    <ul>
                    {% for h2 in h1.children %}
                        <li><a href="{{ h2.permalink | safe }}">{{ h2.title }}</a></li>
                    {% endfor %}
                    </ul>
                    {% endif %}
                </li>
            {% endfor %}
            </ul>
        </aside>
        {% endif %}

        <!-- Post Content -->
        <div class="post-content">
            {{ page.content | safe }}
        </div>

        <!-- Post Footer -->
        <footer class="post-footer">
            <!-- Social Sharing -->
            <div class="share-buttons">
                <h3>Share this post</h3>
                <a href="https://twitter.com/intent/tweet?text={{ page.title }}&url={{ page.permalink }}" target="_blank" rel="noopener" class="share-btn twitter">Twitter</a>
                <a href="https://www.facebook.com/sharer/sharer.php?u={{ page.permalink }}" target="_blank" rel="noopener" class="share-btn facebook">Facebook</a>
                <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ page.permalink }}&title={{ page.title }}" target="_blank" rel="noopener" class="share-btn linkedin">LinkedIn</a>
            </div>

            <!-- Navigation to previous/next posts -->
            {% if page.earlier or page.later %}
            <nav class="post-navigation">
                {% if page.earlier %}
                <a href="{{ page.earlier.permalink }}" class="nav-previous">
                    <span class="nav-label">&larr; Previous</span>
                    <span class="nav-title">{{ page.earlier.title }}</span>
                </a>
                {% endif %}
                {% if page.later %}
                <a href="{{ page.later.permalink }}" class="nav-next">
                    <span class="nav-label">Next &rarr;</span>
                    <span class="nav-title">{{ page.later.title }}</span>
                </a>
                {% endif %}
            </nav>
            {% endif %}
        </footer>
    </div>
</article>
{% endblock %}
